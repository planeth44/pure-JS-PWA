--- 2022-10-16 ---

~ BEHAVIOUR
- [ ] Add an action to sync without being in edit page + trigger a 'done'
- [ ] Home page -> add method to check for pending instances
- [ ] add an option to clear user-notification after timeout
- [ ] add manifest for installability
- [ ] Generate list page after done in edit

~ UI
- [ ] Better UI for /show
- [ ] implement /document/failed view + controller

~ REFACTOR
- [ ] refactor syncStatus values as const in ???
- [ ] refactor syncController. Extract call to fetch to its own method
   Catch a 401 [[https://github.com/github/fetch/issues/201#issuecomment-308213104]]
   [[https://web.dev/fetch-api-error-handling/]]
   [[https://medium.com/trabe/fetch-api-errors-and-the-principle-of-least-surprise-66bbba3e4cc2]]

~ DESIGN
- [ ] add a lastRefreshTs mechanism to throttle call to sync
- [ ] explore syncing / update of theModel [/]
  - [ ] add a version in theModel
  - [ ] call to sync should send uuid + version 
  - [ ] response to sync should send diff on uuid+version
  - [ ] call update on response
  - [ ] modelController should set syncStatus=update whe necessary
- [ ] explore implementing images caching after upload/sync to distant server
  - see syncController@cachePhoto
  - URL could be in the form of images/<parentUuid>/<uuid>
- [ ] explore making a Model class with method getFromPath, setFRomPath, toFormData 

~ README
- [ ] non negociable : performance. Speed of page
- [ ] Closest as possible to web API
- [ ] make use of every native API : service worker, module, 
- [ ] Go for the least amount of code and the least amout of abstraction
- [ ] Locality of behavior (one controller for the page)



~ DONE
- [X] Implement background-sync
- [X] ModelController. Done button should trigger validation. And stop to ask to change if need
- [X] Display files & photos in /edit/<uuid>
- [X] ModelController. [4/4]
  - [X] Cancel button should remove the instance in iDB 
  - [X] If yes remove associated docs
  - [X] For now reset clear all the fields but the model is not cleared. 
  - [X]   Should ask the user if want to clear the model
- [X] Sync w/ distant server 
- [X] fileController should have the fileModel at the top
- [X] style user.notification / should be less present
- [X] remove all flpwa- classes
- [X] extract fc to camelCase updateFormControls@method
- [X] add a /ops route w/ JS only to test & do stuff
- [X] test offline mode when trying to sync [3/3]
  - [X] test server off
  - [X] test server respond with 500
  - [X] test server respond with 400